# #################################################
# CONTRIBUTOR; WARNING
# This file is generated by the  /usr/local/share/docker-entrypoint.d/45_template.rb script. 
# Don't edit it directly.
#
# @see /usr/local/share/docker-entrypoint.d/45_template.rb
# #################################################
[unix_http_server]
file=<%= root %>/tmp/sockets/supervisor
username=decidim
password=<%= unix_http_server_password %>

[inet_http_server]
username=decidim
password=<%= inet_http_server_password %>
port=*:9001

[rpcinterface:supervisor]
supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface

[supervisorctl]
serverurl=unix://<%= root %>/tmp/sockets/supervisor

[supervisord]
logfile_maxbytes=4MB
logfile_backups=10
logfile=<%= root %>/log/run.supervisord.log
pidfile=<%= root %>/tmp/pids/supervisord.pid
loglevel=info
nodaemon=true
user=<%= ENV.fetch("USER", "root") %>

<% supervisord_includes.each do |program_name, program| %>
<%= program if !program_name.nil? && !program_name.empty? %>
<% end %>

[group:workers]
programs=<%= supervisord_includes.select{|name, _ | !name.nil? && !name.empty? }.map {|name, _| name}.join(",") %>