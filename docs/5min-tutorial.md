<!--
CONTRIBUTOR; WARNING
This file is generated by the /update-documentation.rb script. 
Don't edit it directly.

@see /update-documentation.rb
@see /templates/docs/5min-tutorial.md.erb
-->
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

- [5min tutorial](#5min-tutorial)
    - [Local dependencies](#local-dependencies)
  - [Get the docker-compose](#get-the-docker-compose)
  - [Run the docker-compose](#run-the-docker-compose)
  - [Create your first organization](#create-your-first-organization)
    - [Safeguard your migrations files](#safeguard-your-migrations-files)
- [Welcome to Decidim üéâ](#welcome-to-decidim-)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# 5min tutorial
Let's run an empty Decidim instance locally in 5min ‚è±

### Local dependencies
In order to run this tutorial, you'll need the following local installations:

* unix-like bash or shell
* [docker](https://docs.docker.com/get-docker/)
  * If you haven't the desktop version of docker, you need to install [docker-compose](https://docs.docker.com/compose/install/) as well.
* curl

And now, check you have all of this in your terminal:
```
docker --version # should be 20.*
docker-compose --version # 1.29.* is fine
```

## Get the docker-compose
In an empty directory, download the [docker-compose quickstart](https://raw.githubusercontent.com/decidim/docker/master/decidim.0.27.4.yml).

```bash
mkdir my-participatory-platform
cd my-participatory-platform
curl https://raw.githubusercontent.com/decidim/docker/master/decidim.0.27.4.yml > docker-compose.yml
```

## Run the docker-compose
```bash
docker-compose up
```

## Create your first organization
Now you can access [http://127.0.0.1:3000/system](http://127.0.0.1:3000/system). And use the credentials presents in the docker-compose: 

```
DECIDIM_SYSTEM_EMAIL=hello@myorg.com
DECIDIM_SYSTEM_PASSWORD=my_insecure_password
```

Once connected, you can go in [/system](http://127.0.0.1:3000/system/organizations) and create a new organization. 
Then you can define your new organization:

- **Name**: Your application name
- **Reference prefix**: A small prefix for the uploaded files and documents.
- **Host**: `127.0.0.1`
- **Secondary host**: Leave empty
- **Organization admin name**: Your name
- **Organization admin email**: Your email
- **Locale**: Choose your own
- **Force authentication**: don't select
- **Users registration mode**: `Allow participants to register and login`
- **Available Authorizations**: Leave empty

And click on `Create organization & invite admin`.
You will then receive an email on this link: [http://127.0.0.1:1080](http://127.0.0.1:1080). You can there accept the invite.

### Safeguard your migrations files
Your instance now completly rely on the docker image you build. But it is sensible to changes. 
In order to be a bit more resilient, keep a copy of your migrations files and bind them as volume: 

```
# Copy files from the decidim container in a local `db/migrate` directory
docker cp decidim:/home/decidim/app/db/migrate db/migrate
```

And add these lines in your docker-compose.yml file:
```diff
    container_name: decidim
    image: decidim/decidim:0.27.4
    ports:
      - 3000:3000
    volumes:
      - storage:/home/decidim/app/storage
+     - ./db/migrate:/home/decidim/app/migrate
+   environment:
-   environment:    
      - DECIDIM_SYSTEM_EMAIL=hello@myorg.com
      - DECIDIM_SYSTEM_PASSWORD=my_insecure_password
```

You can now `docker-compose up` again and have a safer place to tweak decidim.

# Welcome to Decidim üéâ
That's it, you've got your participatory platform!

| URL | Description |
|---|---|
| [http://127.0.0.1:1080](http://127.0.0.1:1080) | ‚úâÔ∏è A Mailcatcher instance, all emails will be sent there |
| [http://127.0.0.1:3000](http://127.0.0.1:3000) | üå± Decidim instance |
| [http://127.0.0.1:3000/admin](http://127.0.0.1:3000/admin) | Decidim administration, your credentials are `admin@example.org`/`123456` |
| [http://127.0.0.1:3000/sidekiq](http://127.0.0.1:3000/sidekiq) | Monitoring Sidekiq jobs (login with your admin account) |
| [http://127.0.0.1:3000/system](http://127.0.0.1:3000/system) | Decidim system, see environments: `DECIDIM_SYSTEM_EMAIL`/`DECIDIM_SYSTEM_PASSWORD` |

Before deploying, be sure to read the [good practices](./good-practices).
